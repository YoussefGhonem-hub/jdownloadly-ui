"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[9439],{601:(x,m,s)=>{s.r(m),s.d(m,{HomeModule:()=>H});var l=s(177),g=s(8729),t=s(4438),c=s(6354),y=s(6977),d=function(e){return e[e.Playlist=1]="Playlist",e[e.Video=2]="Video",e}(d||{}),p=s(1413),r=s(9152),C=s(7851),D=s(3173);let P=(()=>{class e{constructor(n){this.injector=n,this.currentUser=null,this.ngUnsubscribe=new p.B,this.spinner=this.injector.get(r.ex),this.httpService=this.injector.get(C.kl),this.notificationService=this.injector.get(C.JE),this.authService=this.injector.get(D.u),this.authService.currentUser$.pipe((0,y.Q)(this.ngUnsubscribe)).subscribe(o=>{console.log(o),this.currentUser=o})}getErrorMessage(n,o){const i=o?.get(n);if(i&&i.errors){const a=Object.keys(i.errors);if(a?.length>0){const u=a[0];return i.errors[u]?.message||""}}return""}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}static#t=this.\u0275fac=function(o){return new(o||e)(t.rXU(t.zZn))};static#n=this.\u0275cmp=t.VBU({type:e,selectors:[["ng-component"]],decls:0,vars:0,template:function(o,i){},encapsulation:2})}return e})();var w=s(5312),M=s(1626),j=s(5779),b=s(2242),I=s(8150),v=s(9417),U=s(1141);function _(e,h){1&e&&(t.j41(0,"div",11),t.EFF(1," Invalid YouTube URL "),t.k0s())}function R(e,h){if(1&e&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&e){const n=h.$implicit;t.HbH("customer-badge status-"+n),t.R7$(),t.JRh(n)}}function V(e,h){if(1&e){const n=t.RV6();t.j41(0,"section",13)(1,"div",14)(2,"div",15),t.nrm(3,"img",16),t.k0s(),t.j41(4,"div",17)(5,"h3",18),t.EFF(6),t.k0s(),t.j41(7,"p",19),t.EFF(8),t.k0s(),t.j41(9,"div",20)(10,"p",21)(11,"p-dropdown",22),t.bIt("onChange",function(i){t.eBV(n);const a=t.XpG(2);return t.Njj(a.filter(i.value))}),t.DNE(12,R,2,3,"ng-template",23),t.k0s(),t.j41(13,"p-button",24),t.bIt("click",function(){t.eBV(n);const i=t.XpG(2);return t.Njj(i.download())}),t.k0s()()()()()()}if(2&e){const n=t.XpG(2);t.R7$(3),t.Y8G("src","https://img.youtube.com/vi/"+n.videoId+"/hqdefault.jpg",t.B4B),t.R7$(3),t.JRh(null==n.videoInfo?null:n.videoInfo.title),t.R7$(2),t.SpI(" ",null==n.videoInfo?null:n.videoInfo.duration," "),t.R7$(3),t.Y8G("options",n.videoInfo.resolutions)}}function $(e,h){if(1&e){const n=t.RV6();t.j41(0,"section",13)(1,"div",14)(2,"div",15),t.nrm(3,"img",25),t.k0s(),t.j41(4,"div",17)(5,"h3",18),t.EFF(6),t.k0s(),t.j41(7,"p",19),t.EFF(8),t.k0s(),t.j41(9,"div",20)(10,"p",21)(11,"p-button",24),t.bIt("click",function(){t.eBV(n);const i=t.XpG(2);return t.Njj(i.download())}),t.k0s()()()()()()}if(2&e){const n=t.XpG(2);t.R7$(3),t.Y8G("src",n.thumbnailUrl,t.B4B),t.R7$(3),t.JRh(null==n.videoInfo?null:n.videoInfo.title),t.R7$(2),t.Lme(" ",null==n.videoInfo?null:n.videoInfo.videoCount," / ",null==n.videoInfo?null:n.videoInfo.videoCount," ")}}function G(e,h){if(1&e&&(t.qex(0),t.DNE(1,V,14,4,"section",12)(2,$,12,4,"section",12),t.bVm()),2&e){const n=t.XpG();t.R7$(),t.Y8G("ngIf",!n.isPlaylist),t.R7$(),t.Y8G("ngIf",n.isPlaylist)}}let O=(()=>{class e extends P{constructor(n,o,i){super(n),this.injector=n,this.http=o,this.spinnerService=i,this.showVideo=!1,this.isPlaylist=!1,this.staticOptions=[{label:"Playlist",value:d.Playlist},{label:"Video",value:d.Video}],this.isValidUrl=!0,this.apiKey="AIzaSyDOvcbeZx0N5XAFWJ8LW5CH3rD4wNqZRdg",this.apiUrl="https://www.googleapis.com/youtube/v3/playlists"}ngOnInit(){}ngAfterViewInit(){}getPlaylistDetails(n){return this.http.get(`${this.apiUrl}?part=snippet&id=${n}&key=${this.apiKey}`).pipe((0,c.T)(i=>i.items[0].snippet.thumbnails.high.url))}loadVideo(){this.httpService.GET("Downloadly/video/info",{url:this.videoUrl}).pipe((0,y.Q)(this.ngUnsubscribe)).subscribe(o=>{this.videoInfo=o,this.showVideo=!0})}loadPlaylist(){this.httpService.GET("Downloadly/playlist/info",{url:this.videoUrl}).pipe((0,y.Q)(this.ngUnsubscribe)).subscribe(o=>{this.videoInfo=o,console.log("videoInfo",this.videoInfo)}),this.getPlaylistDetails(this.playlistId).subscribe(o=>{this.thumbnailUrl=o,console.error("thumbnailUrl fetching playlist details:",this.thumbnailUrl),this.showVideo=!0},o=>{})}download(){let n;this.spinnerService.show(),n=this.isPlaylist?`${w.c.config.apiConfig.apiUrl}/Downloadly/playlist/download?url=${encodeURIComponent(this.videoUrl)}`:`${w.c.config.apiConfig.apiUrl}/Downloadly/video/download?url=${encodeURIComponent(this.videoUrl)}&resolution=${this.resolution}`,this.http.get(n,{responseType:"blob"}).subscribe(o=>{const i=window.URL.createObjectURL(o),a=document.createElement("a");a.href=i,a.download=this.isPlaylist?`${this.videoInfo?.title}.zip`:`${this.videoInfo?.title}.mp4`,a.click(),window.URL.revokeObjectURL(i),this.spinnerService.hide()})}extractId(n){const o=n.match(/(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|\S*?[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/),i=n.match(/[?&]list=([a-zA-Z0-9_-]+)/);i?(this.playlistId=i[1],this.isPlaylist=!0,this.loadPlaylist()):o&&(this.videoId=o[1],this.isPlaylist=!1,this.loadVideo())}initPlayer(){this.extractId(this.videoUrl)}validateUrl(){if(this.videoUrl){const n=this.videoUrl.match(/(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|\S*?[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/),o=this.videoUrl.match(/[?&]list=([a-zA-Z0-9_-]+)/);this.isValidUrl=!(!n&&!o)}}filter(n){this.resolution=n}static#t=this.\u0275fac=function(o){return new(o||e)(t.rXU(t.zZn),t.rXU(M.Qq),t.rXU(r.ex))};static#n=this.\u0275cmp=t.VBU({type:e,selectors:[["download"]],features:[t.Vt3],decls:13,vars:4,consts:[[1,"col-12","custom-container"],[1,"card"],[1,"flex","flex-column","md:flex-row","md:justify-content-between","gap-2"],[1,"flex-grow-1","md:flex-grow-0"],[1,"p-input-icon-left","w-full"],[1,"pi","pi-search"],["type","search","pInputText","","placeholder","Paste your video link here","name","videoUrl",1,"w-full",3,"ngModelChange","input","ngModel"],["class","error-message",4,"ngIf"],[1,"flex-grow-0"],["icon","pi pi-cloud-download","label","Download","styleClass","mb-2 p-button-sm",3,"click","disabled"],[4,"ngIf"],[1,"error-message"],["class","card-container",4,"ngIf"],[1,"card-container"],[1,"card-main"],[1,"card-img"],["alt","Video Thumbnail",3,"src"],[1,"card-content"],[1,"card-title"],[1,"card-description"],[1,"card-date"],[1,"date"],["placeholder","Any",2,"padding-right","10px","min-width","12rem",3,"onChange","options"],["pTemplate","item"],["icon","pi pi-download","label","Download","styleClass","mb-2 p-button-sm",3,"click"],["alt","Playlist Thumbnail",3,"src"]],template:function(o,i){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"h5"),t.EFF(3,"Video Downloader"),t.k0s(),t.j41(4,"div",2)(5,"div",3)(6,"span",4),t.nrm(7,"i",5),t.j41(8,"input",6),t.mxI("ngModelChange",function(u){return t.DH7(i.videoUrl,u)||(i.videoUrl=u),u}),t.bIt("input",function(){return i.validateUrl()}),t.k0s()(),t.DNE(9,_,2,0,"div",7),t.k0s(),t.j41(10,"div",8)(11,"p-button",9),t.bIt("click",function(){return i.initPlayer()}),t.k0s()()(),t.DNE(12,G,3,2,"ng-container",10),t.k0s()()),2&o&&(t.R7$(8),t.R50("ngModel",i.videoUrl),t.R7$(),t.Y8G("ngIf",!i.isValidUrl&&i.videoUrl),t.R7$(2),t.Y8G("disabled",!i.isValidUrl||!i.videoUrl),t.R7$(),t.Y8G("ngIf",i.showVideo))},dependencies:[l.bT,j.Ei,b.S,I.ms,v.me,v.BC,v.vS,U.$n],styles:[".w-full[_ngcontent-%COMP%]{width:100%}@media (min-width: 768px){.flex-grow-1[_ngcontent-%COMP%]{flex-grow:1!important}}.custom-container[_ngcontent-%COMP%]{max-width:1140px;margin:0 auto;padding:0 15px}.error-message[_ngcontent-%COMP%]{color:red;font-size:12px;margin:5px 0 0}.card-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:46vh;background-color:#f5f5f5}.card-main[_ngcontent-%COMP%]{display:flex;width:80%;max-width:800px;background-color:#fff;box-shadow:0 0 20px #0000001a;border-radius:10px}.card-img[_ngcontent-%COMP%]{flex-basis:40%}.card-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.card-content[_ngcontent-%COMP%]{flex-basis:60%;padding:40px}.card-title[_ngcontent-%COMP%]{font-size:24px;font-weight:700;margin-bottom:20px}.card-description[_ngcontent-%COMP%]{font-size:16px;line-height:1.5;margin-bottom:30px}.card-date[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:14px;color:#888}.date[_ngcontent-%COMP%]{margin:0}"]})}return e})();const E=[{path:"",component:(()=>{class e{static#t=this.\u0275fac=function(o){return new(o||e)};static#n=this.\u0275cmp=t.VBU({type:e,selectors:[["app-home"]],decls:1,vars:0,template:function(o,i){1&o&&t.nrm(0,"download")},dependencies:[O]})}return e})()}];let T=(()=>{class e{static#t=this.\u0275fac=function(o){return new(o||e)};static#n=this.\u0275mod=t.$C({type:e});static#e=this.\u0275inj=t.G2t({imports:[g.iI.forChild(E),g.iI]})}return e})();var F=s(7362),k=s(6701),S=s(4714),B=s(9735);let H=(()=>{class e{static#t=this.\u0275fac=function(o){return new(o||e)};static#n=this.\u0275mod=t.$C({type:e});static#e=this.\u0275inj=t.G2t({imports:[l.MD,F._,k.KQ,T,b.u,B.Ov.forRoot(),I.kr,S.wZ,v.YN,U.tm]})}return e})()},8807:(x,m,s)=>{s.d(m,{v:()=>t});var l=s(4438),g=s(461);let t=(()=>{class c extends g.h{static \u0275fac=(()=>{let d;return function(r){return(d||(d=l.xGo(c)))(r||c)}})();static \u0275cmp=l.VBU({type:c,selectors:[["ChevronRightIcon"]],standalone:!0,features:[l.Vt3,l.aNF],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M4.38708 13C4.28408 13.0005 4.18203 12.9804 4.08691 12.9409C3.99178 12.9014 3.9055 12.8433 3.83313 12.7701C3.68634 12.6231 3.60388 12.4238 3.60388 12.2161C3.60388 12.0084 3.68634 11.8091 3.83313 11.6622L8.50507 6.99022L3.83313 2.31827C3.69467 2.16968 3.61928 1.97313 3.62287 1.77005C3.62645 1.56698 3.70872 1.37322 3.85234 1.22959C3.99596 1.08597 4.18972 1.00371 4.3928 1.00012C4.59588 0.996539 4.79242 1.07192 4.94102 1.21039L10.1669 6.43628C10.3137 6.58325 10.3962 6.78249 10.3962 6.99022C10.3962 7.19795 10.3137 7.39718 10.1669 7.54416L4.94102 12.7701C4.86865 12.8433 4.78237 12.9014 4.68724 12.9409C4.59212 12.9804 4.49007 13.0005 4.38708 13Z","fill","currentColor"]],template:function(p,r){1&p&&(l.qSk(),l.j41(0,"svg",0),l.nrm(1,"path",1),l.k0s()),2&p&&(l.HbH(r.getClassNames()),l.BMQ("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role))},encapsulation:2})}return c})()}}]);